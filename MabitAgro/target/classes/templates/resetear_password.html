<!DOCTYPE html>
<html lang="es">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Restablecer Contraseña</title>
	<link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/css/bootstrap.min.css" rel="stylesheet">
	<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" rel="stylesheet">
	<link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.1/font/bootstrap-icons.min.css"
		rel="stylesheet">
	<style>
		body {
			background: linear-gradient(120deg, rgb(213, 245, 211) 0%, rgb(211, 207, 207) 100%);
			min-height: 100vh;
		}

		.login-container {
			background: rgba(255, 255, 255, 0.9);
			backdrop-filter: blur(10px);
			border-radius: 20px;
			box-shadow: 0 8px 32px rgba(31, 38, 135, 0.37);
		}

		.fingerprint-container {
			text-align: center;
			margin: 1rem 0;
		}

		.fingerprint-icon {
			font-size: 3rem;
			color: rgb(255, 0, 0);
			animation: pulse 2s infinite;
		}

		.btn-login {
			border-radius: 10px;
			padding: 0.75rem 1rem;
			font-weight: 500;
		}
	</style>
</head>

<body>
	<div class="container">
		<div class="row min-vh-100 align-items-center justify-content-center">
			<div class="col-12 col-sm-10 col-md-8 col-lg-6 col-xl-5">
				<div class="login-container p-4 p-sm-5">
					<div class="text-center mb-4">
						<div class="fingerprint-container">
							<i class="fas fa-fingerprint fingerprint-icon"></i>
						</div>
						<h4 class="fw-bold">Restablecer Contraseña</h4>
						<p class="text-muted">Por favor, sigue los pasos para restablecer tu contraseña.</p>
					</div>

					<!-- Formulario para verificar el correo -->
					<form id="emailForm" th:action="@{/login/resetear-password}" method="post">
						<!-- Mensaje de error -->
						<div th:if="${errorMsg}" class="alert alert-danger">
							<span th:text="${errorMsg}">Mensaje de error</span>
						</div>

						<!-- Mensaje de logout -->
						<div th:if="${exitoMsg}" class="alert alert-success">
							<span th:text="${exitoMsg}">Mensaje de éxito</span>
						</div>
						<div class="form-floating mb-3">
							<div class="input-group">
								<span class="input-group-text border-end-0">
									<i class="fas fa-envelope text-muted"></i>
								</span>
								<div class="form-floating flex-grow-1">
									<input type="email" class="form-control border-start-0" name="email"
										id="floatingRegEmail" placeholder="nombre@ejemplo.com" required>
									<label for="floatingRegEmail">Email</label>
								</div>
							</div>
						</div>
						<button type="submit" class="btn btn-success w-100 btn-login mb-3">
							<i class="fa-regular fa-circle-check me-2"></i>Verificar Correo
						</button>
					</form>
					<form th:action="@{/login}" method="get">
						<button type="submit" class="btn btn-secondary w-100 btn-login mb-3">
							<i class="fa-solid fa-arrow-left me-2"></i>Volver
						</button>
					</form>

					<!-- Acordeón para ingresar el código y la nueva contraseña -->
					<div th:if="${exitoMsg}">
						<div class="accordion" id="accordionExample">
							<div class="accordion-item">
								<h2 class="accordion-header" id="headingOne">
									<button class="accordion-button" type="button" data-bs-toggle="collapse"
										data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
										Formulario
									</button>
								</h2>
								<div id="collapseOne" class="accordion-collapse collapse show"
									aria-labelledby="headingOne" data-bs-parent="#accordionExample">
									<div class="accordion-body">
										<form id="resetForm" th:action="@{/reset-password}" method="post">
											<div class="form-floating mb-3">
												<div class="input-group">
													<span class="input-group-text border-end-0">
														<i class="fa-solid fa-hashtag"></i>
													</span>
													<div class="form-floating flex-grow-1">
														<input type="text" class="form-control border-start-0"
															name="nuevacontrasenha" id="floatingRegPassword"
															placeholder="Código" required>
														<label for="floatingRegPassword">
															Código de verificación</label>
													</div>
												</div>
											</div>
											<div class="form-floating mb-3">
												<div class="input-group">
													<span class="input-group-text border-end-0">
														<i class="fas fa-lock text-muted"></i>
													</span>
													<div class="form-floating flex-grow-1">
														<input type="password" class="form-control border-start-0"
															name="nuevacontrasenha" id="floatingRegPassword"
															placeholder="Contraseña" required>
														<label for="floatingRegPassword">Nueva contraseña</label>
													</div>
												</div>
											</div>
											<div class="form-floating mb-3">
												<div class="input-group">
													<span class="input-group-text border-end-0">
														<i class="fas fa-lock text-muted"></i>
													</span>
													<div class="form-floating flex-grow-1">
														<input type="password" class="form-control border-start-0"
															name="confirmarContrasenha" id="floatingRegPassword"
															placeholder="Contraseña" required>
														<label for="floatingRegPassword">Confirmar contraseña</label>
													</div>
												</div>
											</div>
											<button type="submit" class="btn btn-warning w-100 btn-login mb-3">
												<i class="fa-solid fa-key me-2"></i>Restablecer Contraseña
											</button>
										</form>
									</div>
								</div>
							</div>
						</div>
					</div>

				</div>
			</div>
		</div>
	</div>

	<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/js/bootstrap.bundle.min.js"></script>
</body>

</html>